<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>请在内置浏览器打开此页面</title>
    <script src="qrcode.js"></script>
    <style>
        .wx{
            font-size: 30px;
            color: red;
            padding-left:25%;
        }
        img{
          width: 45%;
          height: 45%;
        }
        
        .divbutton{
          padding-left:30%;
        }
        .font{
          padding-left:10%;
          font-size: 200%;
          color: crimson;
          background-color: beige;
        }
    </style>
</head>
<body >
<div class="divbutton">
    <button><a id="login" href="#" ><h1>在外部浏览器点击登录跳转XX强国app</h1></a></button>
</div>
<div id="wx" class="wx"></div>
<div id="qrcode" style="margin-top: 30px;
 padding-left:10%;">
    <img id="img" src="#"  alt="#"/>
    <img src="./bgm.jpg" alt="宝可梦">
</div>
<div class="font">
  <p>严禁出现商业行为，一经发现限制登录，仅供学习交流使用，该项目随时关停。</p>
  <p>
    如果出现故障请及时联系管理员。
  </p>
  <p>
    学习期间不要频繁点击APP，会导致IP地址连续切换，出现封号风险。
  </p>
</div>
</body>
<script>
    function load() {
        if (isWechat()){
            document.getElementById("wx").innerText = "当前为微信环境，请点击右上角在浏览器中打开"
        }
        let search = window.location.search
        search = search.substring(1,search.length)
        document.getElementById("login").setAttribute("href","dtxuexi://appclient/page/study_feeds?url="+search)
        console.log(unescape(search))
        let imgBase64 = jrQrcode.getQrBase64(unescape(search), {});
        document.getElementById("img").setAttribute("src",imgBase64)
        document.getElementById("login").click()
    }
    function isWechat() {
        return /MicroMessenger/i.test(window.navigator.userAgent);
    }
    load()

</script>
</html>